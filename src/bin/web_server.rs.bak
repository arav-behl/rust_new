use std::sync::Arc;
use wintermute_orderbook_engine::{TradingEngine, web::create_router};

#[tokio::main]
async fn main() {
    println!("ğŸš€ Starting Wintermute Order Book Web Interface...");
    println!("========================================================");

    // Initialize the trading engine
    let engine = Arc::new(TradingEngine::new());

    // Create the web server router
    let app = create_router(engine);

    // Bind to localhost:3000
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .expect("Failed to bind to port 3000");

    println!("ğŸŒ Web interface running at: http://localhost:3000");
    println!("ğŸ”§ Features available:");
    println!("   â€¢ Real-time order book visualization");
    println!("   â€¢ Interactive order submission");
    println!("   â€¢ Live performance metrics");
    println!("   â€¢ WebSocket streaming updates");
    println!();
    println!("ğŸ“Š API Endpoints:");
    println!("   â€¢ POST /api/order - Submit orders");
    println!("   â€¢ GET /api/stats - Performance statistics");
    println!("   â€¢ GET /api/orderbook/:symbol - Order book data");
    println!("   â€¢ GET /ws - WebSocket connection");
    println!();
    println!("ğŸ¯ Perfect for demonstrating to recruiters:");
    println!("   âœ… Sub-microsecond latency tracking");
    println!("   âœ… Real-time market data visualization");
    println!("   âœ… Professional web interface");
    println!("   âœ… Interactive order matching demo");
    println!();

    // Start the server
    axum::serve(listener, app)
        .await
        .expect("Failed to start server");
}